!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(self,(()=>(()=>{const t=document.currentScript;function e(t){let e=t.replace(/^https?:\/\//,"");return e=e.split("?")[0],e=e.replace(/\/$/,""),e}function n(t,e){const n=atob(t);let o="";for(let t=0;t<n.length;t++)o+=String.fromCharCode(n.charCodeAt(t)^e.charCodeAt(t%e.length));return o=o.replace(/'/g,'"'),JSON.parse(o)}async function o(){await async function(){if(!t)return;const o=t.dataset.userId,a=e(window.location.href),c=e(window.location.origin),s=`http://localhost:8000/api/css?ur=${encodeURIComponent(a)}&do=${encodeURIComponent(c)}&us=${encodeURIComponent(o)}`,i=await async function(t){const e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map((t=>t.toString(16).padStart(2,"0"))).join("")}(a),d=localStorage.getItem(`${i}-etag`),l=localStorage.getItem(i);l&&r(n(l,o));const u=d?{"If-None-Match":d}:{};try{const t=await fetch(s,{headers:u,mode:"cors"});if(304===t.status)return;if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.json();if(!e||0===e.length)return;localStorage.setItem(i,e),localStorage.setItem(`${i}-etag`,t.headers.get("ETag")),r(n(e,o))}catch(t){console.debug("获取 CSS 文件出错：",t)}}()}function r(t){document.querySelectorAll("style[data-dynamic-css]").forEach((t=>t.remove())),t.forEach((t=>{const e=document.createElement("style");e.setAttribute("data-dynamic-css","true"),e.innerText=t,document.head.appendChild(e)}))}return document.addEventListener("DOMContentLoaded",(()=>{o()})),["pushState","replaceState"].forEach((t=>{const e=history[t];history[t]=function(...n){const o=e.apply(this,n),r=new Event(t);return window.dispatchEvent(r),o}})),window.addEventListener("popstate",o),window.addEventListener("pushState",o),window.addEventListener("replaceState",o),{}})()));